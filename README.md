# EY_Challenge_2025

Group Shuanggao 
Urban Heat Island (UHI) Index Modeling – Methodology Summary
1.	Regression model
To predict the Urban Heat Island (UHI) Index, we use the ExtraTreesRefressor, a tree-based ensemble model capable of capturing complex non-linear relationships and interactions. This model is well-suited to high-dimensional spatial data.
Prior to training:
Missing values are filled using column-wise means.
Input features are standardized (StandardScaler), and the target is normalized (MinMaxScaler).
Pairwise interaction features are generated by multiplying all feature pairs, significantly enriching the feature space and capturing potential non-linear effects.
2.	Two Spatial Feature Engineering Approaches
To account for the spatial characteristics of urban environments, we use two complementary strategies for spatial feature assignment:
•	A. Nearest Point Assignment (for weather data, population data, mapping inequality data, commute data, air quality data, facilities data.)
For these features (such as weather data), we have sampled data at certain specific locations and assign values based on the nearest reference point. Specifically: We calculate the Euclidean (L2) distance between each sample and the sample point in the data (such as the coordinates of predefined weather stations in meteorological data, such as the center of the Bronx and Manhattan). Then the relevant features are assigned directly from the pre-aggregated statistics of the nearest location. This approach assumes that conditions within the neighborhood are homogeneous and is effective for regional reference data such as weather, where fine-scale variations are less important.
•	B. Buffer-based Aggregation (for building footprint features, building elevation, building height, building energy consumption)
To extract local spatial features, we apply a general buffer-based aggregation method. For each observation point (e.g., a location with a UHI index), we generate one or more circular buffers of a predefined radius. Within each buffer, we query the spatial dataset (e.g., building footprint, elevation, energy usage) and aggregate the attribute values of all geometries intersecting the buffer. Depending on the dataset, aggregation functions such as count, sum, or average are used to calculate meaningful statistics reflecting the surrounding context. This method can capture local urban density and building attributes, and because the process is geometrically defined and parameterized by the buffer size, it is highly general and can be applied to any spatial dataset whose attributes are associated with geographic features.
3.	Additional Datasets Used
1）Building elevation within various buffer sizes：
Data page: https://data.cityofnewyork.us/City-Government/Building-Elevation-and-Subgrade-BES-/bsin-59hv/about_data
Data description:
z_grade: The elevation of the building at it's lowest adjacent grade - the lowest point where the building touches the ground (feet).
z_floor: The elevation of what is estimated to be the lowest actively used floor (feet)
the_geom: Geometry column used for mapping (will convert to geometry column later)
Feature derivation:
for each interested point, we construct the buffer of it and caculate:
average z_grade within the buffer
average z_floor within the buffer
we consider buffer size in [0.005, 0.01]
2）Building height within various buffer sizes
Data page: https://data.cityofnewyork.us/City-Government/Building-Footprints/5zhs-2jue/about_data
 Data description:
 HEIGHTROOF: The height of the roof above the ground elevation.
BIN: Building Identification Number. A number assigned by City Planning and used by Dept. of Buildings to reference information pertaining to an individual building. The first digit is a borough code. The remaining 6 digits are unique for buildings within that borough. In some cases where these 6 digits are all zeros (e.g. 1000000, 2000000, etc.) the BIN is unassigned or unknown.
the_geom: Geometry column used for mapping (will convert to geometry column later)
 Feature derivation:
for each interested point, we construct the buffer of it and caculate:
 Floor Area Ratio (FAR): the measurement of a building's floor area in relation to the size of the lot/parcel
we consider buffer size in [500] meters
3）Building energy consumption within various buffer sizes
Data page: https://energy.cusp.nyu.edu/#/
Data description:
 Weather Normalized Source Energy Use Intensity (EUI): Total amount of the energy from all the raw fuel required to operate a property, including losses that take place during generation, transmission, and distribution normalized by the building gross square footage and expressed in kBtu per gross square foot (kBtu/ft2) of the property normalized for weather. 
Water Use Intensity (WUI): The annual consumption of water in gallons per gross square foot (gal/ft2) of the property.
Greenhouse Gas Intensity (GHG): The total direct and indirect greenhouse gases emitted due to energy used by the property per gross square foot of the property, reported in kilograms of carbon dioxide equivalent per square foot (kgCO2e/ft2). 
Borough, Block, Lot Number (BBL).
Gross Floor Area: Gross square footage of the property, per Department of Finance records.
ENERGY STAR® Score: A 1-to-100 percentile ranking for specified building types, as calculated by Portfolio Manager, with 100 being the best score and 50 the median. It compares the energy performance of a building against the national Commercial Buildings Energy Consumption Survey (CBECS) database, and independent industry surveys for that building type. This rating is normalized for weather and building attributes in order to obtain a measure of efficiency.
Building Energy Efficiency Rating: Building Energy Efficiency Rating is an A-D letter grade and a corresponding label based on the ENERGY STAR® Score that are required to be displayed near the entrance of certain buildings over 25,000 square feet in an effort to publicly disclose energy benchmarking information and to give New Yorkers a snapshot of the building's energy performance relative to its peers.
Property Type: The self-reported property type, as selected from the property type options available in Portfolio Manager.
 Feature derivation:
for each interested point, we construct the buffer of it and caculate:
EUI: the average EUI within the buffer
we consider buffer size in [0.005, 0.01, 0.15], we found other columns are not useful for our model.
4）Population data
Data page: https://www.kaggle.com/datasets/muonneutrino/new-york-city-census-data
Data description of nyc_census_tracts.csv:
CensusTract: Census tract code
TotalPop: Population of the census tract
Data description of census_block_loc.csv:
BlockCode: Block code
Latitude: Latitude of the block
Longitude: Longitude of the block
Feature derivation:
for each interested point, we find the close data point in the population and assign the TotalPop to the interested point:TotalPop.
5）Mapping Inequality Data
Data page: https://dsl.richmond.edu/panorama/redlining/data/NY-Manhattan/ and https://dsl.richmond.edu/panorama/redlining/data/NY-Bronx
 Data description
 category_id: measure the income grade of the region
 area: the area of the region
 residential: category of the region
 commercial: category of the region
industrial: category of the region
Feature derivation:
for each interested point, we find the region that the point is in and assign the following features to the interested point:
category_id: is consider ordinal data
 area: is consider numerical data
residential: is consider binary data
commercial: is consider binary data
industrial: is consider binary data
6）Commute Data in NYC 
Data page: https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/walking-driving-and-cycling/?id=2415#display=summary
 Data description of nyc_commute.csv:
We have 'Bicycle (number)','Car, truck, or van (number)','Public transportation (number)','Walked (number)', 'Bicycle (percent)', 'Car, truck, or van (percent)', 'Public transportation (percent)', 'Walked (percent)' for each GeoID in NYC
 Data description of GeoLookup.csv:
Provides the longitude and latitude of each GeoID in nyc_commute.csv
Feature derivation:
for each interested point, we find the GeoID that the point is cloest to and assign the following features to the interested point:
Bicycle (number)
Car, truck, or van (number)
Public transportation (number)
Walked (number)
Bicycle (percent)
Car, truck, or van (percent)
Public transportation (percent)
Walked (percent)
7) Air Quality in NYC 
 Data page: https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/air-quality/?id=2023#display=summary 
 Data description of nyc_pm2.5.csv:
We have'10th percentile mcg/m3','90th percentile mcg/m3','Mean mcg/m3' for each GeoID in NYC
 Data description of GeoLookup.csv:
Provides the longitude and latitude of each GeoID in nyc_pm2.5.csv
Feature derivation:
for each interested point, we find the GeoID that the point is cloest to and assign the following features to the interested point:
1. 10th percentile mcg/m3
2. 90th percentile mcg/m3
3. Mean mcg/m3
8) Facilities in NYC 
 Data page: https://data.cityofnewyork.us/City-Government/Facilities-Database/ji82-xba5/about_data
 Data description of nyc_facility.csv:
The data contains the facilities in NYC, including the facility name, address, and the facility group. We only use the "PARKS AND PLAZAS" facility column
 Feature derivation:
for each interested point, we build buffer with radius 0.01 and count the number of facilities in the buffer.
PARKS AND PLAZAS_count@0.01
<img width="468" height="647" alt="image" src="https://github.com/user-attachments/assets/46ecac9c-f889-4563-a0f2-cb554b9892b5" />
